import{b as D,t as R}from"../chunks/disclose-version.BcvwuTr4.js";import{u as z,w as A,z as o,A as O,B as k}from"../chunks/runtime.Cjuk95Ml.js";import{b as _}from"../chunks/this.DsiEjiIA.js";import{o as G}from"../chunks/index-client.DibeTDnh.js";import{C as L,A as M,i as W,R as j,a as E,d as H,S as I}from"../chunks/Scene.D-IVrs4_.js";import{a as U,b as $,l as q,p as F,c as J}from"../chunks/cameraControls.DDVdYK0m.js";import{g as m}from"../chunks/globalState.svelte.CHPqU7Zl.js";import{g as K}from"../chunks/controls.svelte.EJqBkrRw.js";var Q=R('<canvas class="h-full w-full"></canvas>');function ea(b,h){z(h,!0);let t=O(void 0);const p=K(),g=U(),v=p.addControl({name:"Search",type:"text",value:""}),u=p.addControl({name:"load",label:"Load (Online)",type:"button",value:"load"}),e=new L;m.camera=e;const y=$(e);y.distance.value=20,G(async()=>{var C;if(!o(t))return;const n=o(t).getContext("webgpu");if(n)try{const s=new M({eventSource:o(t),camera:e});m.contols=s;const{device:r}=await W(),c=new j({context:n,device:r,clearColor:"black"});let l=await i("example");((C=u.params)==null?void 0:C.type)==="button"&&(u.params.onClick=async()=>{l=await i(v.value)}),g.molecule.onChange(async a=>{a&&(l=await i(a))}),E({canvas:o(t),device:r,onResize:a=>{e.aspect=a.clientWidth/a.clientHeight,c.onCanvasResized(a.width,a.height)}}),H(a=>{m.fps=1e3/a,s.update(a),c.render(l,{camera:e})});async function i(a){const w=await q(a);if(!w)throw new Error(`PDB ${a} not found. It may not exist or is too large to load as PDB.`);const S=F(w),{atoms:x,bonds:B}=J(S),P=[...x,B],d=new I(P);return await d.load(r),c.load(d),d}}catch(s){alert(s)}});var f=Q();_(f,n=>k(t,n),()=>o(t)),D(b,f),A()}export{ea as component};
